<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Option Alpha{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/static/js/htmx.min.js"></script>
  <script src="/static/js/alpine.min.js" defer></script>
  <link rel="stylesheet" href="/static/css/app.css">
</head>
<body class="h-full bg-zinc-950 text-zinc-100 flex"
      x-data="{
        collapsed: localStorage.getItem('sidebar_collapsed') === 'true',
        disclaimerDismissed: localStorage.getItem('disclaimer_dismissed') === 'true'
      }"
      x-init="$watch('collapsed', val => localStorage.setItem('sidebar_collapsed', val))">

  <!-- Sidebar -->
  <nav class="sidebar-transition flex flex-col bg-zinc-900 border-r border-zinc-800 h-screen sticky top-0 overflow-y-auto"
       :class="collapsed ? 'w-16' : 'w-56'"
       aria-label="Sidebar navigation">

    <!-- Logo / Collapse Toggle -->
    <div class="flex items-center justify-between px-4 h-14 border-b border-zinc-800">
      <span class="font-semibold text-sm tracking-wide text-zinc-100 whitespace-nowrap"
            x-show="!collapsed" x-transition>Option Alpha</span>
      <button @click="collapsed = !collapsed"
              class="p-1 rounded hover:bg-zinc-800 text-zinc-400 hover:text-zinc-100 transition-colors"
              :title="collapsed ? 'Expand sidebar' : 'Collapse sidebar'"
              :aria-label="collapsed ? 'Expand sidebar' : 'Collapse sidebar'"
              aria-controls="sidebar-nav">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>

    <!-- Navigation Links -->
    <div id="sidebar-nav" class="flex-1 flex flex-col gap-1 px-2 py-3" role="navigation" aria-label="Main navigation">

      <!-- Dashboard -->
      <a hx-get="/" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'dashboard' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Dashboard</span>
      </a>

      <!-- Scanner -->
      <a hx-get="/scanner" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'scanner' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 15.803a7.5 7.5 0 0010.607 0z"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Scanner</span>
      </a>

      <!-- Debate -->
      <a hx-get="/debate" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'debate' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Debate</span>
      </a>

      <!-- Watchlists -->
      <a hx-get="/watchlists" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'watchlists' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Watchlists</span>
      </a>

      <!-- Universe -->
      <a hx-get="/universe" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'universe' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5a17.92 17.92 0 01-8.716-2.247m0 0A9 9 0 013 12c0-1.605.42-3.113 1.157-4.418"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Universe</span>
      </a>

      <!-- Health -->
      <a hx-get="/health" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'health' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Health</span>
      </a>

      <!-- Settings -->
      <a hx-get="/settings" hx-target="#main-content" hx-push-url="true"
         class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                {{ 'bg-zinc-800 text-zinc-100' if active_page == 'settings' else 'text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/50' }}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"/>
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
        </svg>
        <span x-show="!collapsed" x-transition class="whitespace-nowrap">Settings</span>
      </a>

    </div>

    <!-- Version / Footer -->
    <div class="px-4 py-3 border-t border-zinc-800">
      <span x-show="!collapsed" x-transition class="text-xs text-zinc-500">v0.1.0</span>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="flex-1 overflow-y-auto">
    <!-- Disclaimer Banner -->
    <div x-show="!disclaimerDismissed" x-transition
         class="bg-amber-950/50 border-b border-amber-800 px-4 py-3"
         role="alert">
      <div class="flex items-start justify-between max-w-7xl mx-auto">
        <p class="text-amber-200 text-xs leading-relaxed pr-4">{{ disclaimer_text }}</p>
        <button @click="disclaimerDismissed = true; localStorage.setItem('disclaimer_dismissed', 'true')"
                class="text-amber-400 hover:text-amber-300 shrink-0 text-xs font-medium transition-colors"
                aria-label="Dismiss disclaimer">
          Dismiss
        </button>
      </div>
    </div>

    <div id="main-content" class="p-6">
      {% block content %}{% endblock %}
    </div>
  </main>

</body>
</html>
