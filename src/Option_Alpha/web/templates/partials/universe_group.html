{% if groups %}
{% for sector, tickers in groups.items() %}
<section class="bg-zinc-900 border border-zinc-800 rounded-lg mb-4 hover:border-zinc-700 transition-colors"
         x-data="{ open: true }">
  <!-- Sector Header (Collapsible) -->
  <button @click="open = !open"
          class="w-full flex items-center justify-between px-4 py-3 hover:bg-zinc-800/50
                 transition-colors rounded-lg text-left"
          :aria-expanded="open"
          aria-controls="sector-{{ loop.index }}">
    <div class="flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-zinc-500 transition-transform"
           :class="open ? 'rotate-90' : ''" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
           aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
      </svg>
      <h3 class="text-sm font-semibold text-zinc-200">{{ sector }}</h3>
      <span class="text-xs text-zinc-500">({{ tickers | length }})</span>
    </div>
  </button>

  <!-- Ticker Chips -->
  <div x-show="open" x-transition class="px-4 pb-4" id="sector-{{ loop.index }}">
    <div class="flex flex-wrap gap-2">
      {% for ticker in tickers %}
      {% include "partials/ticker_chip.html" %}
      {% endfor %}
    </div>
  </div>
</section>
{% endfor %}
{% else %}
{% with empty_message="No tickers match the current filters. Try broadening your criteria or refresh the universe.", empty_action_url=None %}
  {% include "partials/empty_state.html" %}
{% endwith %}
{% endif %}
