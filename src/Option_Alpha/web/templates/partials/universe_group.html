{% if groups %}
{% for sector, tickers in groups.items() %}
<div class="bg-zinc-900 border border-zinc-800 rounded-lg mb-4" x-data="{ open: true }">
  <!-- Sector Header (Collapsible) -->
  <button @click="open = !open"
          class="w-full flex items-center justify-between px-4 py-3 hover:bg-zinc-800/50
                 transition-colors rounded-lg text-left">
    <div class="flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-zinc-500 transition-transform"
           :class="open ? 'rotate-90' : ''" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
      </svg>
      <h3 class="text-sm font-semibold text-zinc-200">{{ sector }}</h3>
      <span class="text-xs text-zinc-500">({{ tickers | length }})</span>
    </div>
  </button>

  <!-- Ticker Chips -->
  <div x-show="open" x-transition class="px-4 pb-4">
    <div class="flex flex-wrap gap-2">
      {% for ticker in tickers %}
      {% include "partials/ticker_chip.html" %}
      {% endfor %}
    </div>
  </div>
</div>
{% endfor %}
{% else %}
<div class="bg-zinc-900 border border-zinc-800 rounded-lg p-8 text-center">
  <p class="text-zinc-400">No tickers match the current filters.</p>
  <p class="text-sm text-zinc-500 mt-2">Try broadening your filter criteria or refresh the universe.</p>
</div>
{% endif %}
